<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OnlineState</title>

    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
    <link href="https://cdn.staticfile.org/jstree/3.3.8/themes/default/style.min.css" th:href="@{/webjars/jstree/themes/default/style.min.css}" rel="stylesheet">
    <link href="../../static/layui/css/layui.css" th:href="@{/webjars/layui/css/layui.css}" rel="stylesheet">

    <script type="text/javascript" src="https://cdn.staticfile.org/jquery/3.4.0/jquery.min.js" th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script type="text/javascript" src="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/js/bootstrap.min.js" th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
    <script type="text/javascript" src="https://cdn.staticfile.org/distpicker/2.0.5/distpicker.min.js"></script>
    <script type="text/javascript" src="../../static/layui/layui.js" th:src="@{/webjars/layui/layui.js}"></script>
    <script type="text/javascript" src="../../static/js/common.js" th:src="@{/js/common.js}"></script>
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo" style="width: 300px; font-size: 26px;">电梯风扇监控系统</div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left" style="left: 300px;">
            <li class="layui-nav-item"><a href="#" th:href="@{/v1/monitoring-system/page/index}">首页</a></li>
            <li class="layui-nav-item"><a href="#" th:href="@{/v1/monitoring-system/air-conditioners/page/add-info}">设备管理</a></li>
            <li class="layui-nav-item"><a href="#">维修管理</a></li>
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
                    贤心
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="">基本资料</a></dd>
                    <dd><a href="">安全设置</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item"><a href="">退出</a></li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black" style="width: 300px;">
        <div class="layui-side-scroll" style="width: 100%">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree" lay-filter="test" style="width: 100%; text-align: center">
                <li class="layui-nav-item"><a href="#" th:href="@{/v1/monitoring-system/air-conditioners/page/add-info}" style="font-size: 20px"><i class="layui-icon layui-icon-add-circle" style="font-size: 20px"></i> 添加设备</a></li>
                <li class="layui-nav-item"><a href="#" th:href="@{/v1/monitoring-system/air-conditioners/page/online-state}" style="font-size: 20px"><i class="layui-icon layui-icon-console" style="font-size: 20px"></i> 状态查看</a></li>
                <li class="layui-nav-item"><a href="" style="font-size: 20px"><i class="layui-icon layui-icon-face-surprised" style="font-size: 20px"></i> 故障查看</a></li>
            </ul>
        </div>
    </div>

    <div class="layui-body" style="left: 300px;">
        <!-- 内容主体区域 -->
        <div style="padding: 15px;">
            <div class="layui-container" style="
                border: 1px solid #1E9FFF;
                margin: 50px auto;
                padding: 20px;
                background-color: #e2e2e2;
                border-radius: 10px;
                  ">
                <form id="state-search-form" action="#" th:action="@{/v1/monitoring-system/air-conditioners}" method="post" class="form-horizontal" role="form" style="width: 95%; margin-top: 30px;">
                    <div class="form-group">
                        <label for="brand" class="col-sm-1 control-label">品牌</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" id="brand" name="brand" placeholder="请输入品牌" th:value="${airConditioner != null} ? ${airConditioner.brand} : ''">
                        </div>
                        <label for="model" class="col-sm-1 control-label">型号规格</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" id="model" name="model" placeholder="请输入型号规格" th:value="${airConditioner != null} ? ${airConditioner.model} : ''">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="seller" class="col-sm-1 control-label">销售单位</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" id="seller" name="seller" placeholder="请输入销售单位" th:value="${airConditioner != null} ? ${airConditioner.seller} : ''">
                        </div>
                        <label for="address" class="col-sm-1 control-label">设备地址</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" id="address" name="model" placeholder="请输入设备地址" th:value="${airConditioner != null} ? ${airConditioner.model} : ''">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="wind-speed" class="col-sm-1 control-label">风速</label>
                        <div class="col-sm-5">
                            <select id="wind-speed" class="form-control">
                                <option value="">---- 选择风速 ----</option>
                                <option value="FAST">快</option>
                                <option value="SLOW">慢</option>
                                <option value="STOP">停止</option>
                            </select>
                        </div>
                        <label for="equipment-state" class="col-sm-1 control-label">设备状态</label>
                        <div class="col-sm-5">
                            <select id="equipment-state" class="form-control">
                                <option value="">---- 选择设备状态 ----</option>
                                <option value="GOOD">良好</option>
                                <option value="FAULT">故障</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="min-temperature" class="col-sm-1 control-label">温度</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="min-temperature" name="seller" placeholder="℃" onkeyup="value=value.replace(/\D/g,'')" onblur="value=value.replace(/\D/g,'')" th:value="${airConditioner != null} ? ${airConditioner.seller} : ''">
                        </div>
                        <label for="max-temperature" class="col-sm-1 control-label" style="text-align: center; font-size: 12px; padding: 10px 26px; height: 34px;">——</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="max-temperature" name="model" placeholder="℃" onkeyup="value=value.replace(/\D/g,'')" onblur="value=value.replace(/\D/g,'')" th:value="${airConditioner != null} ? ${airConditioner.model} : ''">
                        </div>
                        <label for="min-kwh" class="col-sm-1 control-label">用电量</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="min-kwh" name="seller" placeholder="Kw/h" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.seller} : ''">
                        </div>
                        <label for="max-kwh" class="col-sm-1 control-label" style="text-align: center; font-size: 12px; padding: 10px 26px; height: 34px;">——</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="max-kwh" name="model" placeholder="Kw/h" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.model} : ''">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="min-current-intensity" class="col-sm-1 control-label">电流</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="min-current-intensity" name="seller" placeholder="A" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.seller} : ''">
                        </div>
                        <label for="max-current-intensity" class="col-sm-1 control-label" style="text-align: center; font-size: 12px; padding: 10px 26px; height: 34px;">——</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="max-current-intensity" name="model" placeholder="A" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.model} : ''">
                        </div>
                        <label for="min-voltage" class="col-sm-1 control-label">电压</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="min-voltage" name="seller" placeholder="V" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.seller} : ''">
                        </div>
                        <label for="max-voltage" class="col-sm-1 control-label" style="text-align: center; font-size: 12px; padding: 10px 26px; height: 34px;">——</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="max-voltage" name="model" placeholder="V" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.model} : ''">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="min-power" class="col-sm-1 control-label">功率</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="min-power" name="seller" placeholder="W" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.seller} : ''">
                        </div>
                        <label for="max-power" class="col-sm-1 control-label" style="text-align: center; font-size: 12px; padding: 10px 26px; height: 34px;">——</label>
                        <div class="col-sm-2">
                            <input type="text" class="form-control" id="max-power" name="model" placeholder="W" onkeyup="value=value.replace(/[^\d.]/g,'')" onblur="value=value.replace(/[^\d.]/g,'')" th:value="${airConditioner != null} ? ${airConditioner.model} : ''">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-10" style="width: 40%; margin: 0 auto">
                            <button class="btn btn-success" id="add-btn" style="margin: 20px 0 0 65%; width: 100px;">查询</button>
                        </div>
                        <div class="col-sm-offset-2 col-sm-10" style="width: 40%; margin: 0 auto">
                            <button class="btn btn-danger" id="reset-btn" style="margin: 20px 0 0 65%; width: 100px;">重置</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <hr class="layui-bg-blue" style="margin-bottom: 30px;">

        <div>
            <table id="equipment-data-table" lay-filter="test"></table>
        </div>

    </div>

    <div class="layui-footer" style="left: 300px">
        <!-- 底部固定区域 -->
        河海大学常州校区 2015级物联网工程学院 毕业设计
    </div>
</div>

<input id="exceptionMessage" type="hidden" th:value="${exceptionMessage}">

<script type="text/javascript">
    //JavaScript代码区域
    layui.use('element', function () {
        var element = layui.element;

    });

    // 表格渲染
    layui.use('table', function () {
        var table = layui.table;

        //第一个实例
        table.render({
            elem: '#equipment-data-table',
            url: '/v1/monitoring-system/air-conditioners/list', //数据接口
            loading: true,  // 显示加载条
            page: {
                curr: 0
            }, // 开启分页
            even: true, // 设置隔行背景
            parseData: function (data) { //res 即为原始返回的数据
                return {
                    "code": 0,               //解析接口状态
                    "msg": "",               //解析提示文本
                    "count": data.length,    //解析数据长度
                    "data": data             //解析数据列表
                };
            },
            cols: [
                [ //表头
                    {field: 'equipmentId', title: '设备编号', sort: true, align: 'center'},
                    {field: 'gmtModified', title: '刷新时间', sort: true, align: 'center'},
                    {field: 'temperature', title: '温度(℃)', sort: true, align: 'center'},
                    {field: 'windSpeed', title: '风速', sort: true, align: 'center'},
                    {field: 'kwh', title: '用电量(Kw/h)', sort: true, align: 'center'},
                    {field: 'currentIntensity', title: '电流(A)', sort: true, align: 'center'},
                    {field: 'voltage', title: '电压(V)', sort: true, align: 'center'},
                    {field: 'power', title: '功率(W)', sort: true, align: 'center'},
                    {field: 'equipmentState', title: '状态', sort: true, align: 'center'},
                    {field: 'brand', title: '品牌', sort: true, align: 'center'},
                    {field: 'model', title: '型号', sort: true, align: 'center'},
                    {field: 'seller', title: '销售单位', sort: true, align: 'center'},
                    {field: 'address', title: '地址', sort: true, align: 'center'}
                ]
            ]
        });

    });
</script>
<script type="text/javascript">

    window.onload = function (ev) {

        var message = $("#exceptionMessage").val();
        if (typeof message != "undefined" && message != null && message.length > 0) {
            layui.use('layer', function () {
                layer.msg(message, {time: 3000, skin: 'layui-bg-red', offset: '128px'});
            });
        }

        // 设置“添加”按钮事件
        document.getElementById('add-btn').onclick = function () {
            var province = $("#address-province").val().trim();
            if (typeof province == "undefined" || province == null || province.length <= 0) {
                layui.use('layer', function () {
                    layer.msg('请选择省份!', {time: 3000, skin: 'layui-bg-red', offset: '128px'});
                });
                return false;
            }
            var city = $("#address-city").val().trim();
            if (typeof city == "undefined" || city == null || city.length <= 0) {
                layui.use('layer', function () {
                    layer.msg('请选择城市!', {time: 3000, skin: 'layui-bg-red', offset: '128px'});
                });
                return false;
            }
            var district = $("#address-district").val().trim();
            if (typeof district == "undefined" || district == null || district.length <= 0) {
                layui.use('layer', function () {
                    layer.msg('请选择地区!', {time: 3000, skin: 'layui-bg-red', offset: '128px'});
                });
                return false;
            }
            var detail = $("#address-detail").val().trim();
            if (typeof detail != "undefined" && detail != null && detail.indexOf(' ') !== -1) {
                layui.use('layer', function () {
                    layer.msg('详细地址中不能包含空格!', {time: 3000, skin: 'layui-bg-red', offset: '128px'});
                });
                return false;
            }
            document.getElementById('state-search-form').submit();
        };

        // 设置“重置”按钮事件
        document.getElementById('reset-btn').onclick = function () {
            var form = document.getElementById('state-search-form');
            var inputs = form.getElementsByTagName('input');
            for (var i = 0; i < inputs.length; i++) {
                inputs[i].value = "";
            }

            var selects = form.getElementsByTagName('select');
            for (i = 0; i < selects.length; i++) {
                selects[i].options[0].selected = true;
            }
            return false;
        };

    };
</script>
</body>
</html>